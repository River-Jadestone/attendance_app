<!DOCTYPE html>
<html>
<head>
    <base target="_top">
    <title>출석 관리 시스템</title>
    <?!= include('CSS'); ?>
</head>
<body>
    <div class="container">
        <h1>출석 관리 시스템</h1>

        <!-- 학생 검색 -->
        <div id="search-section">
            <h2>학생 검색</h2>
            <div class="form-group">
                <label for="search-name">학생 이름</label>
                <input type="text" id="search-name" placeholder="이름을 입력하고 Enter 또는 검색 버튼 클릭">
            </div>
            <button onclick="searchStudents()">검색</button>
        </div>

        <!-- 검색 결과 (동명이인 선택) -->
        <div id="search-results-section" style="display:none;">
            <h2>검색 결과</h2>
            <p>동일한 이름의 학생이 여러 명 있습니다. 정보를 확인할 학생을 선택하세요.</p>
            <ul id="search-results-list"></ul>
            <button class="btn-cancel" onclick="goBackToSearch()">다시 검색</button>
        </div>

        <!-- 신규 학생 추가 -->
        <div id="add-student-section" style="display:none;">
            <h2>신규 학생 추가</h2>
            <p>검색된 학생이 없습니다. <strong id="new-student-name-confirm"></strong> 학생을 새로 추가하시겠습니까?</p>
            <button onclick="addStudent()">네, 추가합니다</button>
            <button class="btn-cancel" onclick="goBackToSearch()">아니요, 취소합니다</button>
        </div>

        <!-- 로딩 스피너 -->
        <div id="loading"><p>처리 중...</p></div>

        <!-- 학생 상세 정보 -->
        <div id="student-details" style="display:none;">
            <h2 id="student-name-header"></h2>
            <form id="details-form">
                <div class="form-group">
                    <label for="name">이름</label>
                    <input type="text" id="name">
                </div>
                <div class="form-group">
                    <label for="teacher">담당교사</label>
                    <input type="text" id="teacher">
                </div>
                <div class="form-group">
                    <label for="materials">사용교구</label>
                    <input type="text" id="materials">
                </div>
                <div class="form-group">
                    <label>진도 내역</label>
                    <div id="progress-history" style="white-space: pre-wrap; background-color: #e9ecef; padding: 10px; border-radius: 4px; min-height: 50px;"></div>
                </div>
                <div class="form-group">
                    <label for="new-progress">새로운 진도 추가</label>
                    <input type="text" id="new-progress" placeholder="오늘의 진도 내용을 입력하세요">
                </div>
                <div class="form-group">
                    <label for="notes">특이사항</label>
                    <textarea id="notes" rows="3"></textarea>
                </div>

                <h3>월별 출석 현황 (4회 기준)</h3>
                <table id="attendance-summary-table"><thead><tr><th>해당 월</th><th>출석 횟수</th></tr></thead><tbody></tbody></table>

                <h3>전체 출석 기록 <button type="button" class="btn-add" onclick="addAttendanceRow()">+</button></h3>
                <table id="attendance-table"><thead><tr><th>날짜</th><th>상태</th><th>삭제</th></tr></thead><tbody></tbody></table>

                <h3>교육비 납부 정보 <button type="button" class="btn-add" onclick="addPaymentRow()">+</button></h3>
                <table id="payment-table"><thead><tr><th>납부월</th><th>납부상태</th><th>삭제</th></tr></thead><tbody></tbody></table>

                <br><br>
                <button type="button" onclick="saveChanges()">저장</button>
                <button type="button" class="btn-cancel" onclick="goBackToSearch()">뒤로가기</button>
            </form>
        </div>
    </div>

    <?!= include('JavaScript'); ?>
</body>
</html>